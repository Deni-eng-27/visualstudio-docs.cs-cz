---
title: Oprava nedetekovatelných dynamických parametrů v testu výkonnosti webu v sadě Visual Studio | Microsoft Docs
ms.date: 10/19/2016
ms.topic: conceptual
helpviewer_keywords:
- walkthroughs, load tests
- load tests, walkthroughs
- load tests, correlating dynamic parameters
ms.assetid: 92dff25c-36ee-4135-acdd-315c4962fa11
author: gewarren
ms.author: gewarren
manager: douge
ms.technology: vs-ide-test
ms.openlocfilehash: a696f03e715e2b3bede34f45bce90596a14897aa
ms.sourcegitcommit: 6a9d5bd75e50947659fd6c837111a6a547884e2a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/16/2018
---
# <a name="fix-non-detectable-dynamic-parameters-in-a-web-performance-test"></a>Oprava nedetekovatelných dynamických parametrů v testu výkonnosti webu

Některé weby používat dynamické parametry ke zpracování některé z jejich webových požadavků. Dynamický parametr je parametr, jehož hodnota je regenerována pokaždé, když uživatel spustí aplikaci. Příkladem dynamický parametr je ID relace. ID relace změní obvykle každých 5 až 30 minut. Webové výkonu testovací záznam a přehrávání modul automaticky zpracovává nejběžnějších typů dynamických parametrů:

-   Dynamický parametr hodnoty, které jsou nastaveny v hodnota souboru cookie. Modul testu výkonu webové automaticky zpracuje tyto při přehrávání.

-   Dynamický parametr hodnoty, které jsou nastavené na stránky HTML, jako je ASP.NET skrytá pole stavu zobrazení. Tyto jsou automaticky zpracovávány zapisovač, který přidá skryté pole pravidla pro extrakci do testu.

-   Dynamický parametr hodnoty, které jsou nastavené jako řetězec dotazu nebo formuláře odeslat parametry. Tyto jsou zpracovávány prostřednictvím dynamický parametr detekce po zaznamenání testu výkonnosti webu.

Některé typy dynamických parametrů nezjišťují. Nezjištěné dynamický parametr způsobí, že vaše testu výkonnosti webu dojde k chybě při spuštění protože dynamická hodnota bude mít jiné pokaždé, když se test spustí. Pro tyto parametry zpracování správně, můžete přidat pravidla pro extrakci dynamické parametry v testech výkonnosti vašeho webu ručně.

## <a name="create-and-run-a-web-app-with-dynamic-parameters"></a>Vytvoření a spuštění webové aplikace s dynamické parametry

K předvedení rozpoznat a nedetekovatelných dynamických parametrů, vytvoříme jednoduchou webovou aplikaci ASP.NET, který má tři webových formulářů s několika ovládacími prvky a některé vlastní kód. Potom jsme získáte informace jak k izolaci dynamických parametrů a postupy pro jejich zpracování.

1.  Vytvořte nový projekt ASP.NET s názvem DynamicParamaterSample.

     ![Vytvořit prázdný projekt webové aplikace ASP.NET](../test/media/web_test_dynamicparameter_aspproject.png "Web_Test_DynamicParameter_ASPProject")

2.  Přidání webového formuláře s názvem Querystring.aspx.

3.  V návrhovém zobrazení přetáhněte ji HiddenField na stránku a v pak změňte hodnotu pro vlastnost (ID) pro HiddenFieldSessionID.

     ![Přidat HiddenField](../test/media/web_test_dynamicparameter_hiddenfield.png "Web_Test_DynamicParameter_HiddenField")

4.  Změnit zobrazení zdroje pro stránku řetězce dotazu a přidejte že následující zvýrazněnou kódu ASP.NET a JavaScript sloužící ke generování dynamických parametrů ID imitované relace:

    ```html
    <head runat="server">
    <title>JavaScript dynamic property correlation sample</title><script type="text/javascript" language="javascript">    <!--        function jScriptQueryString()         {            var Hidden = document.getElementById("HiddenFieldSessionID");            var sessionId = Hidden.value;            window.location = 'JScriptQuery.aspx?CustomQueryString=jScriptQueryString___' + sessionId;         }    //--></script>
    </head>
    <body>
        <form id="form1" runat="server">
        <div>
             <a name="QuerystringHyperlink" href="ASPQuery.aspx?CustomQueryString=ASPQueryString___<%= Session.SessionID %>">Dynamic querystring generated by ASP.net</a>         <br/>         <br/>         <a href="javascript:jScriptQueryString()">Dynamic querystring generated by javascript </a>
        </div>
        <asp:HiddenField ID="HiddenFieldSessionID" runat="server" />
        </form>
    </body>
    </html>
    ```

5.  Otevřete soubor Querystring.aspx.cs a přidejte následující zvýrazněný kód do metody Page_Load:

    ```csharp
    public partial class Querystring : System.Web.UI.Page
    {
        protected void Page_Load(object sender, EventArgs e)
        {
            Session.Add("Key", "Value");HiddenFieldSessionID.Value = Session.SessionID;
        }
    }
    ```

6.  Přidání druhého webového formuláře s názvem ASPQuery.aspx.

7.  V návrhovém zobrazení přetáhněte popisek na stránku a změňte hodnotu pro vlastnost jeho (ID) na IndexLabel.

     ![Přidání štítku do webového formuláře](../test/media/web_test_dynamicparameter_label.png "Web_Test_DynamicParameter_Label")

8.  Přetáhněte hypertextový odkaz na stránku a změňte vale pro vlastnost Text na zpět.

     ![Přidání hypertextového odkazu ve webovém formuláři](../test/media/web_test_dynamicparameter_hyperlink.png "Web_Test_DynamicParameter_Hyperlink")

9. Zvolte (...) pro vlastnost NavigationURL.

     ![Upravit vlastnosti NavigateURL](../test/media/web_test_dynamicparameter_hyperlink_navurl.png "Web_Test_DynamicParameter_Hyperlink_NavURL")

     Vyberte Querystring.aspx.

     ![Vyberte adresu URL jako Querystring.aspx](../test/media/web_test_dynamicparameter_hyperlink_navurl2.png "Web_Test_DynamicParameter_Hyperlink_NavURL2")

10. Otevřete soubor ASPQuery.aspx.cs a přidejte následující zvýrazněný kód do metody Page_Load:

    ```csharp
    protected void Page_Load(object sender, EventArgs e)
            {
                int index;            string qstring;            string dateportion;            string sessionidportion;            qstring = Request.QueryString["CustomQueryString"];            index = qstring.IndexOf("___");            dateportion = qstring.Substring(0, index);            index += 3;            sessionidportion = qstring.Substring(index, qstring.Length - index);            if (sessionidportion != Session.SessionID)            {                Response.StatusCode = 401;                IndexLabel.Text = "Failure!  Invalid querystring parameter found.";            }            else            {                IndexLabel.Text = "Success.  Dynamic querystring parameter was found.";            }            IndexLabel.Text += "<br>\r\n";
            }
    ```

11. Přidejte třetí webového formuláře s názvem JScriptQuery.aspx.

     Stejně jako jsme to udělali pro druhé stránce, přetáhněte štítek na nastavení jeho (ID) vlastnost IndexLabel formuláře a přetáhněte hypertextový odkaz na nastavení jeho vlastnost text zpět a jeho vlastnost NavigationURL na Querystring.aspx formuláře.

     ![Přidejte a nakonfigurujte třetí webového formuláře](../test/media/web_test_dynamicparameter_addwebform3.png "Web_Test_DynamicParameter_AddWebForm3")

12. Otevřete soubor JScriptQuery.aspx.cs a přidejte následující zvýrazněný kód do metody Page_Load:

    ```csharp
    protected void Page_Load(object sender, EventArgs e)
            {
                int index;            string qstring;            string dateportion;            string sessionidportion;            qstring = Request.QueryString["CustomQueryString"];            index = qstring.IndexOf("___");            dateportion = qstring.Substring(0, index);            index += 3;            sessionidportion = qstring.Substring(index, qstring.Length - index);            if (sessionidportion != Session.SessionID)            {                Response.StatusCode = 401;                IndexLabel.Text = "Failure!  Invalid querystring parameter found.";            }            else            {                IndexLabel.Text = "Success.  Dynamic querystring parameter was found.";            }            IndexLabel.Text += "<br>\r\n";
            }
    ```

13. Uložte projekt.

14. V Průzkumníku řešení nastavte Querystring.aspx jako úvodní stránky.

     ![Nastavení úvodní stránky na Querystring.aspx](../test/media/web_test_dynamicparameter_setstartpage.png "Web_Test_DynamicParameter_SetStartPage")

15. Stisknutím kombinace kláves CTRL + F5 a spusťte webovou aplikaci v prohlížeči. Zkopírujte adresu URL. Je nutné ho při záznamu svůj test.

16. Zkuste i odkazy. Se musí každý zobrazí se zpráva "úspěch. Dynamické řetězec dotazu nebyl nalezen parametr."

     ![Spuštění webové aplikace](../test/media/web_test_dynamicparameter_runapp.png "Web_Test_DynamicParameter_RunApp")

     ![Success&#33;](../test/media/web_test_dynamicparameter_runapp2.png "Web_Test_DynamicParameter_RunApp2")

## <a name="create-a-web-performance-test"></a>Vytvoření testu výkonnosti webu

1.  Přidejte výkonu webu a zatížení testovacího projektu do vašeho řešení.

     ![Přidat web perfromance a zatížení testování projektu](../test/media/web_test_dynamicparameter_addtestproject.png "Web_Test_DynamicParameter_AddTestProject")

2.  Přejmenujte WebTest1.webtest DynamicParameterSampleApp.webtest.

     ![Přejmenujte testu výkonnosti webu](../test/media/web_test_dynamicparameter_renametest.png "Web_Test_DynamicParameter_RenameTest")

3.  Záznam test.

     ![Zaznamenejte testu výkonnosti webu](../test/media/web_test_dynamicparameter_recordtest.png "Web_Test_DynamicParameter_RecordTest")

4.  Zkopírujte a vložte adresu URL z webového serveru, které testujete do prohlížeče.

     ![Vložte adresu URL z webu testuje](../test/media/web_test_dynamicparameter_recordtest2.png "Web_Test_DynamicParameter_RecordTest2")

5.  Procházejte webové aplikace. Zvolte ASP.NET odkazu, odkaz zpět a javascript odkazu, který následuje zpětný odkaz.

     Zapisovač webu testovací zobrazí adres URL pro žádosti a odpovědi protokolu HTTP, jak procházet webové aplikace.

6.  Klikněte na tlačítko Zastavit v testu záznamník.

     Dialogové okno pro zjišťování dynamických parametrů zobrazuje indikátor průběhu, který se zobrazí stav parametr detekce v odpovědi protokolu HTTP, které byly přijaty.

7.  Dynamický parametr pro CustomQueryString na stránce ASPQuery je automaticky zjištěna. Dynamický parametr pro CustomQueryString na stránce JScriptQuery však nebyla zjištěna.

     Klepněte na tlačítko OK přidat pravidla pro extrakci do Querystring.aspx, vazbu na stránku ASPQuery.

     ![Zvýšení úrovně dynamický parametr zjištěné](../test/media/web_test_dynamicparameter_promotedialog.png "Web_Test_DynamicParameter_PromoteDialog")

     Pravidla pro extrakci se přidá na první požadavek pro Querystring.aspx.

     ![Pravidla pro extrakci přidána do žádosti o](../test/media/web_test_dynamicparameter_autoextractionrule.png "Web_Test_DynamicParameter_AutoExtractionRule")

     Rozbalte druhý žádost ve stromové struktuře žádost o ASPQuery.aspx a Všimněte si, že CustomQueryString hodnota byla svázána se pravidlo rozbalení.

     ![CustomQueryString vázána na pravidla pro extrakci](../test/media/web_test_dynamicparameter_autoextractionrule2.png "Web_Test_DynamicParameter_AutoExtractionRule2")

8.  Uložte test.

## <a name="run-the-test-to-isolate-the-non-detected-dynamic-parameter"></a>Spuštění testu izolovat dynamický parametr zjistil

1.  Spuštění testu.

     ![Spuštění testu výkonnosti webu](../test/media/web_test_dynamicparameter_runtest.png "Web_Test_DynamicParameter_RunTest")

2.  Čtvrtý požadavek pro stránku JScriptQuery.aspx selže. Přejděte na webový test.

     ![Chyba dynamický parametr ve výsledcích testu](../test/media/web_test_dynamicparameter_runresults.png "Web_Test_DynamicParameter_RunResults")

     Uzel JScriptQuery.aspx požadavku je zvýrazněn v editoru. Rozbalte uzel a Všimněte si, že část "1v0yhyiyr0raa2w4j4pwf5zl" CustomQueryString se zdá být dynamické.

     ![By mohly vzbuzovat podezření dynamický parametr v CustomQueryString](../test/media/web_test_dynamicparameter_runresults2.png "Web_Test_DynamicParameter_RunResults2")

3.  Vraťte prohlížeč výsledků testu výkonnosti webu a vyberte stránku JScriptQuery.aspx, který selhal. Zvolte kartu požadavku, ověřte, zda je zaškrtnuté políčko Zobrazit nezpracovaná data, přejděte dolů a vyberte rychle najít na CustomQueryString.

     ![Použití rychlého hledání k izolaci dynamických parametru](../test/media/web_test_dynamicparameter_runresultsquckfind.png "Web_Test_DynamicParameter_RunResultsQuckFind")

4.  Víme z vyhledávání v editoru testu, který požadavek JScriptQuery.aspx CustomQueryString byla přiřazena hodnota: `jScriptQueryString___1v0yhyiyr0raa2w4j4pwf5zl`, a že je podezření dynamické část "1v0yhyiyr0raa2w4j4pwf5zl". V Najít co rozevíracího seznamu, odeberte podezření část hledaný řetězec. Řetězec by měl být "CustomQueryString = jScriptQueryString___".

     Dynamické parametry jsou přiřazeny jejich hodnot v jednom z požadavků, které předchází požadavek, který obsahuje chybu. Proto vyberte hledání až zaškrtávací políčko a zvolte Najít další, dokud neuvidíte před žádostí pro Querystring.aspx zvýrazněných v panelu požadavku. To byste měli udělat po volbě najít další třikrát.

     ![Použití rychlého hledání k izolaci dynamických parametrů](../test/media/web_test_dynamicparameter_runresultsquckfind4.png)

     Jak je vidět na kartě odpověď a v jazyce JavaScript implementována dříve vidíte níže, parametr řetězce dotazu CustomQueryString je přiřazena hodnota "jScriptQueryString___" a je také zřetězen s vrácená hodnota z var sessionId.

    ```
    function jScriptQueryString()          {             var Hidden = document.getElementById("HiddenFieldSessionID");             var sessionId = Hidden.value;             window.location = 'JScriptQuery.aspx?CustomQueryString=jScriptQueryString___' + sessionId;          }

    ```

     Teď, když budeme vědět, kde dochází k chybě a že je potřeba extrahovat hodnotu pro ID relace. Extrakce hodnota je však pouze text, takže potřebujeme další izolovat chyba pokusu o nalezení řetězec, kde se zobrazí sessionId skutečnou hodnotu. Pohledem na kód, uvidíte, že var sessionId roven hodnotě vrácené HiddenFieldSessionID.

5.  Použití rychlé hledání na HiddenFieldSessionID, vymazání hledání až zaškrtávací políčko a vyberete aktuální požadavek.

     ![Použití rychlého hledání na HiddenFieldSession](../test/media/web_test_dynamicparameter_runresultsquckfindhiddensession.png "Web_Test_DynamicParameter_RunResultsQuckFindHiddenSession")

     Všimněte si, že vrácená hodnota je záznam není stejný řetězec jako původní testu výkonnosti webu. Pro tento test spustit, je hodnota vrácená "5w4v3yrse4wa4axrafykqksq" a v původním záznamu, hodnota je "1v0yhyiyr0raa2w4j4pwf5zl". Vzhledem k tomu, že hodnota není shodná s původní záznamu, je generována chyba.

6.  Protože máme opravit dynamický parametr v původním záznamu, vyberte na panelu nástrojů zaznamenaná výsledek.

     ![Zvolte zaznamenaná výsledek](../test/media/web_test_dynamicparameter_recordedresult.png "Web_Test_DynamicParameter_RecordedResult")

7.  Ve výsledcích zaznamenaná vyberte třetí požadavku, což je stejný Querystringrequest.aspx požadavek, který izolované v testovacím běhu výsledky.

     ![Vyberte stejné žádosti ve výsledcích zaznamenaná](../test/media/web_test_dynamicparameter_recordedresultsselectnode.png "Web_Test_DynamicParameter_RecordedResultsSelectNode")

     Vyberte kartu odpovědi, posuňte se dolů a vyberte původní hodnotu dynamický parametr "1v0yhyiyr0raa2w4j4pwf5zl", který jste dříve izolované a přidání pravidla pro extrakci.

     ![Přidání pravidla pro extrakci pro dynamický parametr](../test/media/web_test_dynamicparameter_recordedresultaddextractionrule.png "Web_Test_DynamicParameter_RecordedResultAddExtractionRule")

     Nové pravidlo extrakce se přidá k žádosti o Querystring.aspx a je přiřazena hodnota 'Param0'.

     Pokud dialogové okno nám informuje, že nebyly nalezeny extrahované text pro vazby parametru, klepněte na tlačítko Ano.

     ![Vytvoření pravidla pro extrakci](../test/media/web_test_dynamicparameter_addextractiondialog.png "Web_Test_DynamicParameter_AddExtractionDialog")

8.  Zvolte Najít další. Na první shodu je ten, který je potřeba změnit, což je parametr pro CustomQueryString v JScriptQuery stránky.

     ![Najít a nahradit text pro parametr](../test/media/web_test_dynamicparameter_addextractionfindreplace.png "Web_Test_DynamicParameter_AddExtractionFindReplace")

9. Zvolte nahrazení.

     ![Nahraďte text s parametrem](../test/media/web_test_dynamicparameter_addextractionfindreplace2.png "Web_Test_DynamicParameter_AddExtractionFindReplace2")

     Parametr řetězce dotazu v žádosti o JScriptQuery.aspx se aktualizuje pomocí nový parametr kontextu: CustomQueryString = jScriptQueryString___ {{Param0}}.

     ![Parametr řetězce dotazu použít](../test/media/web_test_dynamicparameter_addextractionfindreplace3.png "Web_Test_DynamicParameter_AddExtractionFindReplace3")

10. Zavřete najít a nahradit dialogové okno. Všimněte si, podobně jako strukturu ve stromové struktuře žádost mezi dynamický parametr zjištěné a -zjistil dynamický parametr, který je korelační.

     ![Byla zjištěna a korelační dynamických parametrů](../test/media/web_test_dynamicparameter_conclusion.png "Web_Test_DynamicParameter_Conclusion")

11. Spuštění testu. Nyní pracuje bez chyby.

## <a name="qa"></a>MODUL OTÁZKY A ODPOVĚDI

### <a name="q-can-i-re-run-dynamic-parameter-detection-if-my-web-app-gets-modified"></a>Otázka: je možné znovu používat dynamický parametr detekce Pokud webová aplikace získá změnit?

 **Odpověď:** Ano, použijte následující postup:

1.  Na panelu nástrojů vyberte Převedení dynamických parametrů na parametry testu webové tlačítko.

     Po dokončení procesu zjišťování, pokud nejsou zjištěny žádné dynamické parametry, převedení dynamických parametrů na webový test parametry, které se zobrazí dialogové okno.

     Dynamické parametry jsou uvedeny ve sloupci dynamických parametrů. Požadavky, že dynamický parametr extrahována ze a vázána na jsou uvedeny v části parametru extrahovat z odpovědi a vazby na žádost sloupce.

     Pokud vyberete dynamický parametr v převedení dynamických parametrů do dialogového okna webového testu parametry, bude ve stromu požadavek Editor testů výkonnosti webu zvýrazněn dva požadavky. První požadavek bude požadavek, který přidá pravidlo rozbalení. Druhá žádost je, kde bude vázán k extrahované hodnotě.

2.  Vyberte nebo zrušte zaškrtnutí políčka vedle dynamické parametry, které byste chtěli automaticky korelovat. Ve výchozím nastavení se kontroluje všechny dynamické parametry.

### <a name="q-do-i-need-to-configure-visual-studio-to-detect-dynamic-parameters"></a>Otázka: Potřebuji ke konfiguraci Visual Studio k detekci dynamických parametrů?

 **Odpověď:** výchozí konfigurace sady Visual Studio je ke zjištění dynamických parametrů při záznamu testu výkonnosti webu. Ale pokud máte možnosti aplikace Visual Studio nakonfigurovat zjistit dynamických parametrů nebo testuje webová aplikace získá změnit, další dynamických parametrů; můžete stále [spustit dynamický parametr detekce z Editor testu výkonnosti webu](#FindingNonDetectableDynamicParamters_QA_ReRunDetection).