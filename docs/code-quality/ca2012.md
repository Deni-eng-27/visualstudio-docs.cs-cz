---
title: 'CA2012: Správně použít hodnoty ValueTask'
ms.date: 06/18/2020
ms.topic: reference
f1_keywords:
- UseValueTasksCorrectly
- CA2012
helpviewer_keywords:
- UseValueTasksCorrectly
- CA2012
author: stephentoub
ms.author: stoub
manager: jeffhand
ms.workload:
- multiple
ms.openlocfilehash: e5f3791414afc63f2647885feb2b7fac1d624e58
ms.sourcegitcommit: a18c7e9b367c2f92f6e54c3eaef442775d457667
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/15/2020
ms.locfileid: "90098812"
---
# <a name="ca2012-use-valuetasks-correctly"></a>CA2012: Správně použít hodnoty ValueTask

|Položka|Hodnota|
|-|-|
|RuleId|CA2012|
|Kategorie|Microsoft.Reliability|
|Zásadní změna|Nenarušující|

## <a name="cause"></a>Příčina

<xref:System.Threading.Tasks.ValueTask>Instance vrácená z volání členů se používá způsobem, který by mohl vést k výjimkám, poškození nebo špatnému výkonu.

## <a name="rule-description"></a>Popis pravidla

<xref:System.Threading.Tasks.ValueTask> instance vrácené z volání členů jsou určeny k přímému čekání.  Pokusí se využít ValueTask vícekrát nebo získat přímý přístup k jednomu výsledku před tím, než je známý k dokončení, může způsobit výjimku nebo poškození.  Ignorování takového ValueTask je pravděpodobně indikace funkční chyby a může snížit výkon.

## <a name="how-to-fix-violations"></a>Jak opravit porušení

Obecně by ValueTasks měla být očekávána přímo místo zahození nebo uložení do jiných umístění, jako jsou místní proměnné nebo pole.

## <a name="when-to-suppress-warnings"></a>Kdy potlačit upozornění

Pro ValueTasks vrácené z libovolného člena volá volající, aby předpokládal, že ValueTask musí být spotřebované (například await) pouze jednou a jednou.  Nicméně pokud vývojář také ovládá vyvolaný člen a má zkušenosti s jeho implementací, může vývojář znát, že je bezpečné potlačit upozornění, například pokud vrátí ValueTask vždy zabalí <xref:System.Threading.Tasks.Task> objekt.

## <a name="see-also"></a>Viz také

- [Upozornění spolehlivosti](../code-quality/reliability-warnings.md)
