---
title: C26414
ms.date: 11/15/2017
ms.topic: conceptual
f1_keywords:
- C26414
helpviewer_keywords:
- C26414
ms.assetid: dd875d0c-6752-4491-a533-3e8831795fbc
author: mikeblome
ms.author: mblome
manager: markl
ms.workload:
- multiple
ms.openlocfilehash: 8ced283edb792ee917706974070dce407cc29f5a
ms.sourcegitcommit: 535ef05b1e553f0fc66082cd2e0998817eb2a56a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/07/2019
ms.locfileid: "72011675"
---
# <a name="c26414-reset_local_smart_ptr"></a>C26414 RESET_LOCAL_SMART_PTR

Přesuňte, zkopírujte, přeřaďte nebo resetujte místní inteligentní ukazatel.

**C++ Základní pokyny**: R. 5: Preferovat objekty s obory, nepřidělit haldu zbytečně

Inteligentní ukazatele jsou vhodné pro dynamickou správu prostředků, ale nejsou vždy nutné. Například vytvoření místní dynamické vyrovnávací paměti může být snadné (někdy efektivněji) spravované pomocí standardních kontejnerů. Pro jednotlivé objekty nemusí být nutné dynamické přidělení (např. Pokud tyto objekty nikdy neobsahují své funkce Creator) a mohou být nahrazeny místními proměnnými. Inteligentní ukazatele se stanou užitečnou, pokud scénář vyžaduje změnu vlastnictví, tj. opětovné přiřazení dynamického prostředku vícekrát nebo na více cestách. To zahrnuje i případy, kdy jsou prostředky získány z externího kódu a inteligentní ukazatele slouží k prodloužení životnosti prostředku.

## <a name="remarks"></a>Poznámky

- Kromě standardních šablon std:: unique_pointer a std:: shared_pointer tato kontrolu rozpozná uživatelsky definované typy, které jsou pravděpodobně určeny pro inteligentní ukazatele. U těchto typů se očekává definování následujících operací:
  - přetížené nebo vyhrazené operátory přístupu členů, které jsou veřejné a nejsou označené jako odstraněné;
  - veřejný destruktor, který se ani neodstraní ani nepoužívá jako výchozí. To zahrnuje destruktory, které jsou explicitně definovány jako prázdné.
  - Typ Microsoft:: WRL:: ComPtr se chová jako sdílený ukazatel, ale často se používá ve velmi specifických scénářích, které jsou ovlivněné správou životnosti COM. Aby nedocházelo k nadměrnému hluku, je tento typ vyfiltrován.
  - Tato kontrolu hledá explicitní místní přidělení přiřazená inteligentním ukazatelům, aby identifikovala, jestli se jako alternativa mohla určit rozsah proměnných. Kromě přímých volání operátoru new speciální funkce jako std:: make_unique a std:: make_shared jsou také interpretovány jako přímá alokace.

## <a name="example"></a>Příklad

Dynamická vyrovnávací paměť

```cpp
void unpack_and_send(const frame &f)
{
    auto buffer = std::make_unique<char[]>(f.size()); // C26414
    f.unpack(buffer.get());
    // ...
}
```

Dynamická vyrovnávací paměť – nahrazeno kontejnerem

```cpp
void unpack_and_send(const frame &f)
{
    auto buffer = std::vector<char>(f.size());
    f.unpack(buffer.data());
    // ...
}
```
