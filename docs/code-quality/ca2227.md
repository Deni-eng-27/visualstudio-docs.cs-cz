---
title: 'CA2227: Vlastnosti kolekce by měly být pouze pro čtení'
ms.date: 09/28/2018
ms.topic: reference
f1_keywords:
- CA2227
- CollectionPropertiesShouldBeReadOnly
helpviewer_keywords:
- CA2227
- CollectionPropertiesShouldBeReadOnly
ms.assetid: 26967aaf-6fbe-438a-b4d3-ac579b5dc0f9
author: mikejo5000
ms.author: mikejo
manager: jillfra
dev_langs:
- CSharp
- VB
- CPP
ms.workload:
- multiple
ms.openlocfilehash: b3884a817610aa2c67c9e00d6251f4dbc63662e9
ms.sourcegitcommit: 4bcd6abb89feff1cf8251e3ded73fdc30b67e347
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/17/2020
ms.locfileid: "81615597"
---
# <a name="ca2227-collection-properties-should-be-read-only"></a>CA2227: Vlastnosti kolekce by měly být pouze pro čtení

|||
|-|-|
|TypeName|CollectionPropertiesShouldBeReadOnly|
|CheckId|CA2227|
|Kategorie|Microsoft.Použití|
|Narušující změny|Narušující|

## <a name="cause"></a>Příčina

Externě viditelné, zapisovatelné vlastnost je <xref:System.Collections.ICollection?displayProperty=fullName>typu, který implementuje . Toto pravidlo ignoruje pole, indexery (vlastnosti s názvem Item), neměnné kolekce, kolekce jen pro čtení a sady oprávnění.

## <a name="rule-description"></a>Popis pravidla

Zapisovatelná vlastnost kolekce umožňuje uživateli nahradit kolekci zcela jinou kolekcí. Vlastnost jen pro čtení zastaví kolekce nahradit, ale stále umožňuje jednotlivé členy nastavit. Pokud nahrazení kolekce je cíl, upřednostňovaný návrhový vzor je zahrnout metodu odebrat všechny prvky z kolekce a metodu znovu naplnit kolekce. Příklad <xref:System.Collections.ArrayList.Clear%2A> tohoto <xref:System.Collections.ArrayList.AddRange%2A> vzoru <xref:System.Collections.ArrayList?displayProperty=fullName> naleznete v metodách třídy.

Binární serializace i serializace XML podporují vlastnosti jen pro čtení, které jsou kolekce. Třída <xref:System.Xml.Serialization.XmlSerializer?displayProperty=fullName> má specifické požadavky pro <xref:System.Collections.ICollection> <xref:System.Collections.IEnumerable?displayProperty=fullName> typy, které implementují a aby bylo serializovatelné.

## <a name="how-to-fix-violations"></a>Jak opravit porušení

Chcete-li opravit porušení tohoto pravidla, proveďte vlastnost jen pro čtení. Pokud to návrh vyžaduje, přidejte metody pro vymazání a opětovné naplnění kolekce.

## <a name="when-to-suppress-warnings"></a>Kdy potlačit varování

Upozornění můžete potlačit, pokud je vlastnost součástí třídy [DTO (Data Transfer Object).](/previous-versions/msp-n-p/ff649585(v=pandp.10))

V opačném případě nepotlačujte upozornění z tohoto pravidla.

## <a name="example"></a>Příklad

Následující příklad ukazuje typ s vlastností zapisovatelné kolekce a ukazuje, jak lze kolekci nahradit přímo. Navíc zobrazuje upřednostňovaný způsob nahrazení vlastnosti kolekce jen `Clear` pro `AddRange` čtení pomocí a metody.

[!code-csharp[FxCop.Usage.PropertiesReturningCollections#1](../code-quality/codesnippet/CSharp/ca2227-collection-properties-should-be-read-only_1.cs)]
[!code-vb[FxCop.Usage.PropertiesReturningCollections#1](../code-quality/codesnippet/VisualBasic/ca2227-collection-properties-should-be-read-only_1.vb)]
[!code-cpp[FxCop.Usage.PropertiesReturningCollections#1](../code-quality/codesnippet/CPP/ca2227-collection-properties-should-be-read-only_1.cpp)]

## <a name="related-rules"></a>Související pravidla

- [CA1819: Vlastnosti by neměly vracet pole](../code-quality/ca1819.md)
