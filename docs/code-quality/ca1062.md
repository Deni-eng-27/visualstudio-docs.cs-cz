---
title: 'CA1062: Ověřte argumenty veřejných metod'
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- CA1062
- ValidateArgumentsOfPublicMethods
- Validate arguments of public methods
helpviewer_keywords:
- CA1062
- ValidateArgumentsOfPublicMethods
author: mikejo5000
ms.author: mikejo
manager: jillfra
dev_langs:
- CSharp
- VB
ms.workload:
- multiple
ms.openlocfilehash: 80e3d1d6a6c9db3912048aee9c282ec5f105a121
ms.sourcegitcommit: d233ca00ad45e50cf62cca0d0b95dc69f0a87ad6
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 01/01/2020
ms.locfileid: "75580718"
---
# <a name="ca1062-validate-arguments-of-public-methods"></a>CA1062: Ověřte argumenty veřejných metod

|||
|-|-|
|TypeName|ValidateArgumentsOfPublicMethods|
|CheckId|CA1062|
|Kategorie|Microsoft.Design|
|Zásadní změna|Nenarušující|

## <a name="cause"></a>příčina

Externě viditelná metoda odkazuje na jeden z jejích odkazů, aniž by bylo nutné ověřit, zda je tento argument `null` (`Nothing` v Visual Basic).

Následující aspekty tohoto pravidla jsou [konfigurovatelné](#configurability):
* Určuje, jestli se má analyzovat parametr metody rozšíření this.
* Zadejte v odkazovaných knihovnách nebo projektech ověřovací metody kontroly hodnoty null, které ověřují, že předané argumenty jsou jiné než null.
* Části základu kódu, které se mají vyloučit z analýzy

## <a name="rule-description"></a>Popis pravidla

Všechny argumenty odkazů, které jsou předány externě viditelným metodám, by měly být zkontrolovány proti `null`. V případě potřeby vyvolejte <xref:System.ArgumentNullException>, když je argument `null`.

Pokud metoda může být volána z neznámého sestavení, protože je deklarována jako veřejná nebo chráněná, měli byste ověřit všechny parametry metody. Pokud je metoda navržena tak, aby byla volána pouze známými sestaveními, měli byste provést interní metodu a použít atribut <xref:System.Runtime.CompilerServices.InternalsVisibleToAttribute> pro sestavení, které obsahuje metodu.

## <a name="how-to-fix-violations"></a>Jak opravit porušení

Chcete-li opravit porušení tohoto pravidla, ověřte každý argument odkazu na `null`.

## <a name="when-to-suppress-warnings"></a>Kdy potlačit upozornění

Můžete potlačit upozornění z tohoto pravidla, pokud jste si jistí, že parametr s odkazem byl ověřen jiným voláním metody ve funkci.

## <a name="configurability"></a>Konfigurovatelnost

Pokud toto pravidlo spouštíte z [analyzátorů FxCop](install-fxcop-analyzers.md) (a ne pomocí starší verze analýzy), můžete nakonfigurovat analýzu pro toto pravidlo.

### <a name="exclude-extension-method-this-parameter"></a>Vyloučit parametr metody rozšíření this

Ve výchozím nastavení toto pravidlo analyzuje a označí parametr `this` pro metody rozšíření. Můžete vyloučit analýzu parametru `this` pro rozšiřující metody přidáním následující dvojice klíč-hodnota do souboru. editorconfig v projektu:

```ini
dotnet_code_quality.CA1062.exclude_extension_method_this_parameter = true
```

### <a name="null-check-validation-methods"></a>Ověřovací metody kontroly hodnoty null

Toto pravidlo může vést k falešně pozitivním výsledkům, pokud váš kód volá speciální metody ověřování s hodnotou null v odkazovaných knihovnách nebo projektech. Těmto falešně pozitivním hodnotám se můžete vyhnout zadáním názvu nebo podpisu ověřovacích metod kontroly hodnoty null.  Analýza pak předpokládá, že argumenty předané této metodě jsou po volání jiné než null. Chcete-li například označit všechny metody s názvem `Validate` jako metody ověřování s hodnotou null, můžete do souboru. editorconfig v projektu přidat následující dvojici klíč-hodnota:

```ini
dotnet_code_quality.CA1062.null_check_validation_methods = Validate
```

Povolené formáty názvu metody v hodnotě možnosti (oddělené |):
  - Pouze název metody (včetně všech metod s názvem, bez ohledu na obsahující typ nebo obor názvů)
  - Plně kvalifikované názvy ve [formátu ID dokumentace k](https://github.com/dotnet/csharplang/blob/master/spec/documentation-comments.md#id-string-format)symbolu s volitelnou předponou `M:`.

Příklady:

| Hodnota možnosti | Přehled |
| --- | --- |
|`dotnet_code_quality.CA1062.null_check_validation_methods = Validate` | Odpovídá všem metodám s názvem "Validate" v kompilaci
|`dotnet_code_quality.CA1062.null_check_validation_methods = Validate1|Validate2` | Odpovídá všem metodám s názvem ' Validate1 ' nebo ' Validate2 ' v kompilaci
|`dotnet_code_quality.CA1062.null_check_validation_methods = NS.MyType.Validate(ParamType)` | Odpovídá konkrétní metodě ' Validate ' s daným plně kvalifikovaným podpisem
|`dotnet_code_quality.CA1062.null_check_validation_methods = NS1.MyType1.Validate1(ParamType)|NS2.MyType2.Validate2(ParamType)` | Odpovídá specifickým metodám ' Validate1 ' a ' Validate2 ' s odpovídajícím plně kvalifikovaným podpisem

### <a name="excluded-symbol-names"></a>Vyloučené názvy symbolů

Můžete nakonfigurovat, které části vašeho základu kódu budou vyloučeny z analýzy. Například chcete-li určit, že pravidlo by nemělo běžet na žádný kód v rámci typů s názvem `MyType`, přidejte do souboru. editorconfig v projektu následující dvojici klíč-hodnota:

```ini
dotnet_code_quality.CA1062.excluded_symbol_names = MyType
```

Povolené formáty názvů symbolů v hodnotě možnosti (oddělené |):
  - Pouze název symbolu (včetně všech symbolů s názvem, bez ohledu na obsahující typ nebo obor názvů)
  - Plně kvalifikované názvy ve [formátu ID dokumentace k](https://github.com/dotnet/csharplang/blob/master/spec/documentation-comments.md#id-string-format)symbolu. Každý název symbolu vyžaduje předponu typu symbolu, jako je například "M:" prefix pro metody, předpona "T:" pro typy, předpona "N:" pro obory názvů atd.
  - `.ctor` pro konstruktory a `.cctor` pro statické konstruktory

Příklady:

| Hodnota možnosti | Přehled |
| --- | --- |
|`dotnet_code_quality.CA1062.excluded_symbol_names = MyType` | Odpovídá všem symbolům s názvem ' MyType ' v kompilaci
|`dotnet_code_quality.CA1062.excluded_symbol_names = MyType1|MyType2` | Odpovídá všem symbolům s názvem ' MyType1 ' nebo ' MyType2 ' v kompilaci
|`dotnet_code_quality.CA1062.excluded_symbol_names = M:NS.MyType.MyMethod(ParamType)` | Odpovídá konkrétní metodě ' MyMethod ' s daným plně kvalifikovaným podpisem
|`dotnet_code_quality.CA1062.excluded_symbol_names = M:NS1.MyType1.MyMethod1(ParamType)|M:NS2.MyType2.MyMethod2(ParamType)` | Odpovídá specifickým metodám ' MyMethod1 ' a ' MyMethod2 ' s odpovídajícím plně kvalifikovaným podpisem

Všechny tyto možnosti můžete nakonfigurovat jenom pro toto pravidlo, pro všechna pravidla nebo pro všechna pravidla v této kategorii (návrh). Další informace najdete v tématu [Konfigurace analyzátorů FxCop](configure-fxcop-analyzers.md).

## <a name="example"></a>Příklad

Následující příklad ukazuje metodu, která porušuje pravidlo a metodu, která splňuje pravidlo.

```csharp
using System;

namespace DesignLibrary
{
    public class Test
    {
        // This method violates the rule.
        public void DoNotValidate(string input)
        {
            if (input.Length != 0)
            {
                Console.WriteLine(input);
            }
        }

        // This method satisfies the rule.
        public void Validate(string input)
        {
            if (input == null)
            {
                throw new ArgumentNullException(nameof(input));
            }
            if (input.Length != 0)
            {
                Console.WriteLine(input);
            }
        }
    }
}
```

```vb
Imports System

Namespace DesignLibrary

    Public Class Test

        ' This method violates the rule.
        Sub DoNotValidate(ByVal input As String)

            If input.Length <> 0 Then
                Console.WriteLine(input)
            End If

        End Sub

        ' This method satisfies the rule.
        Sub Validate(ByVal input As String)

            If input Is Nothing Then
                Throw New ArgumentNullException(NameOf(input))
            End If

            If input.Length <> 0 Then
                Console.WriteLine(input)
            End If

        End Sub

    End Class

End Namespace
```

## <a name="example"></a>Příklad

Kopírovací konstruktory, které naplní pole nebo vlastnosti odkazující na objekty, mohou také porušovat pravidlo CA1062. K porušení dojde, protože zkopírovaný objekt, který je předán konstruktoru kopírování, může být `null` (`Nothing` v Visual Basic). Chcete-li vyřešit porušení, použijte metodu static (Shared in Visual Basic) pro kontrolu, zda kopírovaný objekt není null.

V následujícím příkladu třídy `Person` může být `null`objekt `other` předaný konstruktoru `Person` Copy.

```csharp
public class Person
{
    public string Name { get; private set; }
    public int Age { get; private set; }

    public Person(string name, int age)
    {
        Name = name;
        Age = age;
    }

    // Copy constructor CA1062 fires because other is dereferenced
    // without being checked for null
    public Person(Person other)
        : this(other.Name, other.Age)
    {
    }
}
```

## <a name="example"></a>Příklad

V následujícím změněném `Person` příklad `other` objekt, který je předán konstruktoru Copy, nejprve kontroluje hodnotu null v metodě `PassThroughNonNull`.

```csharp
public class Person
{
    public string Name { get; private set; }
    public int Age { get; private set; }

    public Person(string name, int age)
    {
        Name = name;
        Age = age;
    }

    // Copy constructor
    public Person(Person other)
        : this(PassThroughNonNull(other).Name, other.Age)
    {
    }

    // Null check method
    private static Person PassThroughNonNull(Person person)
    {
        if (person == null)
            throw new ArgumentNullException(nameof(person));
        return person;
    }
}
```
