---
title: C6381
ms.date: 11/04/2016
ms.topic: reference
f1_keywords:
- C6381
helpviewer_keywords:
- C6381
ms.assetid: c01a3040-26d4-47ac-b72d-7e1292ca435f
author: mikeblome
ms.author: mblome
manager: markl
ms.workload:
- multiple
ms.openlocfilehash: 2bc23de0d8f5257204c7f6fd3b2310513626c3a9
ms.sourcegitcommit: 535ef05b1e553f0fc66082cd2e0998817eb2a56a
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 10/07/2019
ms.locfileid: "72017431"
---
# <a name="c6381"></a>C6381
Upozornění C6381: Vypnutí rozhraní API @no__t – > 0function vyžaduje platný parametr dwReason nebo lpMessage.

Toto upozornění je vydáno, pokud je volána metoda InitiateSystemShutdownEx:

- Bez předání platného důvodu vypnutí (parametr dwReason). Pokud je parametr parametr dwReason nula, výchozí hodnota je nedefinované vypnutí. Ve výchozím nastavení je to také neplánované vypnutí. Pro tento parametr byste měli použít jeden z kódů důvodů vypnutí systému.

- Bez předání zprávy pro vypnutí (lpMessage).

Doporučujeme, abyste při volání tohoto rozhraní API použili vhodné parametry, které správcům systému pomůžou určit příčinu vypnutí.

## <a name="example"></a>Příklad

Následující kód vygeneruje toto upozornění, protože parametr dwReason je nula a lpMessage má hodnotu null:

```cpp
void f()
{
  //...
  BOOL bRet;
  bRet = InitiateSystemShutdownEx( NULL,
                                   NULL, // message
                                   0,
                                   FALSE,
                                   TRUE,
                                   0);  // shutdown reason
  // ...
}
```

Chcete-li toto upozornění opravit, zadejte parametr dwReason a lpMessage, jak je znázorněno v následujícím kódu:

```cpp
#include <windows.h>
void f()
{
  //...
  BOOL bRet;
  bRet = InitiateSystemShutdownEx( NULL,
                               "Hardware Failure",  // message
                               0,
                               FALSE,
                               TRUE,
                               SHTDN_REASON_MAJOR_HARDWARE ); // reason
  // ...
}
```