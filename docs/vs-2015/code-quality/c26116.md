---
title: C26116 | Microsoft Docs
ms.date: 11/15/2016
ms.prod: visual-studio-dev14
ms.technology: vs-ide-code-analysis
ms.topic: reference
f1_keywords:
- C26116
helpviewer_keywords:
- C26116
ms.assetid: 43e99d2c-405e-4913-b6bd-47f5858b2877
caps.latest.revision: 8
author: corob-msft
ms.author: corob
manager: jillfra
ms.openlocfilehash: c023ee4c244abbc34126a911cdba9fb427bba821
ms.sourcegitcommit: 6cfffa72af599a9d667249caaaa411bb28ea69fd
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 09/02/2020
ms.locfileid: "77266571"
---
# <a name="c26116"></a>C26116
[!INCLUDE[vs2017banner](../includes/vs2017banner.md)]

Upozornění C26116: Nepodařilo se získat nebo pozastavit zámek \<lock> \<func> .  
  
 V rámci tohoto jazyka není provedeno vynucování *dvojic s* syntakticky vymezenými zámky a zámky *verzí* v programech C/C++. Funkce může zavést vedlejší efekt uzamčení tím, že provede pozorovatelnou úpravu stavu souběžnosti. Například funkce uzamknout obálka zvyšuje počet pořizování zámků nebo počet zámků pro daný zámek. Funkci, která má vedlejší účinek z zámku, můžete opatřit pomocí `_Acquires_lock_` nebo v `_Requires_lock_held` uvedeném pořadí. Bez takovýchto poznámek se očekává, že funkce nemění počet zámků poté, co se vrátí. Pokud získání a vydání nejsou vyvážené, považují se za *osamocené*. Upozornění C26116 se vydá, když je funkce opatřena poznámkami `_Acquires_lock_` , ale nezíská zámek nebo když je funkce opatřena poznámkami, `_Requires_lock_held` a uvolní zámek.  
  
## <a name="example"></a>Příklad  
 Následující příklad generuje upozornění C26116, protože funkce `DoesNotLock` byla opatřena poznámkami, `_Acquires_lock_` ale nezískává ji. Funkce `DoesNotHoldLock` vygeneruje upozornění, protože je označena pomocí poznámky a neblokuje `_Requires_lock_held` ji.  
  
```  
  
typedef struct _DATA   
{  
    CRITICAL_SECTION cs;  
} DATA;  
  
_Acquires_lock_(p->cs) void DoesLock(DATA* p)   
{  
    EnterCriticalSection(&p->cs); // OK  
}  
  
_Acquires_lock_(p->cs) void DoesNotLock(DATA* p)   
{  
    // Warning C26116  
}  
  
_Requires_lock_held_(p->cs) void DoesNotHoldLock(DATA* p)   
{  
    LeaveCriticalSection(&p->cs); // Warning C26116  
}  
  
```  
  
## <a name="see-also"></a>Viz také  
 [C26115](../code-quality/c26115.md)
